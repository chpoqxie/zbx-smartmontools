Шаблон для заббикса 6.4, позволяющий мониторить состояние дисков по их SMART'у.

Это позволяет делать "из коробки" zabbix-agent-2, но мне по причине личных тараканов требовалось это сделать в стандартном zabbix-agent без "2".

Шаблон опрашивает диски через smartctl из пакета smartmontools (обеспечьте ему возможность запуска smartctl из-под рута добавлением в sudoers строчки из одноименного файла в репозитории). Находит все доступные smartctl'у диски, считывает с них модель/серийник "для истории", и читает доступные атрибуты (скорей всего часть атрибутов станет Unsupported в заббиксе - это нормально, т.к. никакой винт не поддерживает вообще все атрибуты смарта. Выключите их опрос, если покраснеют).

Имеющиеся триггеры мониторят изменение критических параметров (сбойные секторы, ремапы) и при их изменении генерят инциденты.

Контролируется температура диска. Критичные точки температуры задаются через макросы.

Также опрашивается общий SMART status, отдаваемый smartctl'ем. Никакой конкретики он не выдает, если на него заругается - надо идти и смотреть глазками на состояние диска.

NB: Требуется Smartmontools версии 7.0 или старше, т.к. только в седьмой версии этот пакет научился отдавать информацию в JSON-формате.
